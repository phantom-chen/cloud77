<style>
  a {
    margin-left: 10px;
  }
</style>

<div class="content">

  <p>tasks works!</p>

  <div class="container col-lg-12" style="padding: 0px;">
    <div class="card">
      <div class="card-header" style="display:flex;width: 100%;">

        <div style="width: 100%">
          <h6>
            user id list : <a [routerLink]="'/tasks/' + item" *ngFor="let item of userIds" (click)="getTasks(item);">{{ item }}</a>
          </h6>

          <h6>get {{ tasks.length }} todos from service for {{ userId > 0 ? 'user ' + userId : 'all' }}</h6>
        </div>

        <button class="btn btn-outline-success" data-toggle="modal" data-target="#myModal" (click)="addTask();" style="width: 50px;float: right;margin-right: 0px;">
          <i class="material-icons">add</i>
        </button>


      </div>

    </div>

    <br/>
    <br/>

    <div class="card-body" style="padding: 0px;">
      <div class="modal fade" id="myModal">
        <div class="modal-dialog">
          <div class="modal-content">

            <!-- 模态框头部 -->
            <div class="modal-header">
              <h4 class="modal-title">{{ selectedTask.id > 0 ? 'update todo' : 'add todo' }}</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- 模态框主体 -->
            <div class="modal-body">
              <form>
                <div class="form-group" *ngIf="selectedTask.id > 0">
                  <label for="email">Id: {{ selectedTask.id }}</label>
                  <!-- <input type="email" class="form-control" id="id" placeholder=""> -->
                </div>
                <div class="form-group">
                  <label for="pwd">UserId:</label>
                  <input type="text" class="form-control" name="userId" placeholder="Enter UserId" [(ngModel)]="selectedTask.userId">
                </div>

                <div class="form-group">
                  <label for="email">Title:</label>
                  <input type="text" class="form-control" name="title" placeholder="Enter Title" [(ngModel)]="selectedTask.title">
                </div>

                <div class="form-group">
                  <label for="email">Status</label>
                  <select title="status" name="completed" class="form-control" [(ngModel)]="selectedTask.completed">
                    <option value="1">completed</option>
                    <option value="0">not completed</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="code">Code:</label>
                  <input type="text" class="form-control" name="code" placeholder="Enter Code" [(ngModel)]="selectedTask.code">
                </div>

                <br/>
                <br/>
                <!-- <div class="form-check">
                  <label class="form-check-label">
                    <input class="form-check-input" type="check"> completed
                  </label>

                  <label class="form-check-label">
                    <input class="form-check-input" type="check"> not completed
                  </label>
                </div> -->
                <!-- <button type="submit" class="btn btn-primary">Submit</button> -->
              </form>
            </div>

            <!-- 模态框底部 -->
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="save();">save</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">close</button>
            </div>

          </div>
        </div>
      </div>
      <table class="table table-sm table-striped table-bordered table-hover">
        <thead style="width: 100%;margin: auto;">
          <th style="min-width: 50px;">Id</th>
          <th style="min-width: 50px;">UserId</th>
          <th style="width:100%;">Title</th>
          <th style="min-width: 100px;">Status</th>
          <th style="min-width: 100px;"></th>
        </thead>

        <tbody>
          <tr *ngFor="let item of tasks" style="width: 100%;margin: auto;">
            <td>{{ item.id }}</td>
            <td>{{ item.userId }}</td>
            <td>{{ item.title }}</td>
            <td>
              {{ item.completed ? 'completed' : 'not completed' }}
            </td>
            <td>
              <div style="display: flex;">
                <button class="btn btn-outline-success btn-sm" data-toggle="modal" data-target="#myModal" (click)="updateTask(item);"><i class="material-icons">edit</i></button>
                <button class="btn btn-outline-danger btn-sm" (click)="deleteTask(item);"><i class="material-icons">delete</i></button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    <div>

  </div>

</div>
