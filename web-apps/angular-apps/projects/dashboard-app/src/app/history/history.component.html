<div class="container">

    <div *ngIf="!isLogin && !loading">
        <p class="text-danger">Not authorized!</p>
        <button (click)="onSSO()">Sign In with SSO</button>
    </div>

    <div *ngIf="isLogin">
        
        <mat-radio-group aria-label="Select an option" [(ngModel)]="searchType">
            <mat-radio-button value="event_name">Event Name</mat-radio-button>
            <mat-radio-button value="user_email">User Email</mat-radio-button>
        </mat-radio-group>

        <div class="row" *ngIf="searchType === 'event_name'">
            <mat-form-field>
                <mat-label>Event Name</mat-label>
                <mat-select [(ngModel)]="eventName">
                    <mat-option value="">None</mat-option>
                    <mat-option *ngFor="let name of eventNames" [value]="name">{{ name }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="row" *ngIf="searchType === 'user_email'">
            <mat-form-field>
                <mat-label>User Email</mat-label>
                <input matInput placeholder="User Email" autocomplete="off" [(ngModel)]="email" name="user-email"
                    (change)="onEmailChange($event)">
            </mat-form-field>
        
            <button mat-raised-button color="primary" (click)="deleteHistory()">Delete User History</button>
        </div>

        <button mat-raised-button color="primary" (click)="searchEvents()">Search History</button>

        <table class="table table-sm table-striped table-bordered table-hover">
            <tr>
                <th>Name</th>
                <th>Date</th>
                <th>Updated By</th>
                <th>Payload</th>
                <!-- <th style="width: 100px;">Actions</th> -->
            </tr>
            <tr *ngFor="let e of events">
                <td>{{ e.name || 'Null' }}</td>
                <td>{{ e.date }}</td>
                <td>{{ e.userEmail }}</td>
                <td>{{ e.payload || 'Null' }}</td>
                <!-- <td style="display:flex;padding: 2px;margin: 2px;">
                <button type="button"
                    class="btn btn-outline-primary btn-sm" style="margin-right:6px;"><i
                    class="material-icons">edit</i></button>
                <button type="button"
                    class="btn btn-outline-danger btn-sm"><i class="material-icons">delete</i></button>
            </td> -->
            </tr>
        </table>

                <form class="example-form">
          <mat-form-field class="example-full-width">
            <mat-label>Leave a comment</mat-label>
            <textarea matInput placeholder="Ex. It makes me feel..."></textarea>
          </mat-form-field>
        </form>
    </div>
</div>